---
import { AdminBooksDataTable } from '@components/admin/admin-books-data-table'
import { AdminTabs } from '@components/admin/admin-tabs'
import Layout from '@layouts/layout-admin.astro'
import { db } from 'db/managn'
import * as schema from 'db/schema'
import { desc } from 'drizzle-orm'

if (import.meta.env.NODE_ENV !== 'development') {
  return Astro.redirect('/')
}

const books = await db
  .select()
  .from(schema.books)
  .orderBy(desc(schema.books.id))
---

<Layout name="books" title="책 관리 | managn">
  <AdminBooksDataTable client:idle data={books} />
</Layout>
