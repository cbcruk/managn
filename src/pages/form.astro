---
import Layout from '@layouts/Layout.astro'
import { BookAuthorsForm } from '@components/BookAuthorsForm'
import { db } from 'db/managn'
import * as schema from 'db/schema'

if (import.meta.env.NODE_ENV !== 'development') {
  return Astro.redirect('/')
}

const authorsData = await db.select().from(schema.authors)
const booksData = await db.select().from(schema.books)

export const prerender = true
---

<Layout title="í™ˆ | managn">
  <BookAuthorsForm client:only data={{ authorsData, booksData }} />
</Layout>
