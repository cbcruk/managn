---
import Layout from '@layouts/layout.astro'
import { Form } from '@components/form/form'
import { db } from 'db/managn'
import * as schema from 'db/schema'

if (import.meta.env.NODE_ENV !== 'development') {
  return Astro.redirect('/')
}

const authorsData = await db.select().from(schema.authors)
const booksData = await db.select().from(schema.books)

export type AuthorsData = typeof authorsData
export type BooksData = typeof booksData
---

<Layout title="관리자 | managn">
  <Form client:only="react" data={{ authorsData, booksData }} />
</Layout>
